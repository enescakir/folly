# This file was @generated by getdeps.py

name: linux

on:
  push:
    branches:
    - build-test

jobs:
  build:
    strategy:
      matrix:
        runs-on: [ubuntu-latest-8-cores, buildjet-2vcpu-ubuntu-2204-arm]
    name: CI ${{matrix.runs-on}}
    runs-on: ${{matrix.runs-on}}
    continue-on-error: true
    steps:
    - name: cat /proc/cpuinfo
      run: cat /proc/cpuinfo

    - name: uname -mr
      run: uname -mr

    - name: nproc
      run: nproc

    - name: lscpu
      run: lscpu

    - name: lsblk
      run: lsblk

    - name: df -Th
      run: df -Th
      
    - name: lspci
      run: lspci -vv

    - name: install fio
      run: sudo apt-get -y install fio

    - name: run fio
      run: |
        sudo fio --filename=./f --size=2GB --direct=1 --rw=randrw --bs=4k --ioengine=libaio \
          --iodepth=256 --runtime=30 --numjobs=4 --time_based --group_reporting \
          --name=iops-test-job --eta-newline=1